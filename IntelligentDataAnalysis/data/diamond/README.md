# üíé –ù–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö: –Ñ–¥–∏–Ω–∏–π –ø–∞—Å–ø–æ—Ä—Ç –¥—ñ–∞–º–∞–Ω—Ç–∞

–¶–µ–π –Ω–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö (`diamonds_dataset.csv`) —î **–í—ñ—Ç—Ä–∏–Ω–æ—é –î–∞–Ω–∏—Ö (Data Mart)**, —è–∫–∞ –±—É–ª–∞ —à—Ç—É—á–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –¥–∏–ø–ª–æ–º–Ω–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É ¬´–†–æ–∑—Ä–æ–±–ª–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –¥—ñ–∞–º–∞–Ω—Ç—ñ–≤¬ª.

–í—ñ–Ω –º—ñ—Å—Ç–∏—Ç—å 1000 –∑–∞–ø–∏—Å—ñ–≤ –ø—Ä–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ç–∞ –ø—Ä–æ–¥–∞–∂ –¥—ñ–∞–º–∞–Ω—Ç—ñ–≤ –∑–∞ 3-—Ä—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ (2023-2025) —ñ —Å–ª—É–≥—É—î —î–¥–∏–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º –¥–∞–Ω–∏—Ö –¥–ª—è –≤—Å—ñ—Ö –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ –†–ì–† (—Ä–µ–≥—Ä–µ—Å—ñ—è, –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è, –∞–Ω–∞–ª—ñ–∑ –≤–∏–∂–∏–≤–∞–Ω–æ—Å—Ç—ñ, —á–∞—Å–æ–≤—ñ —Ä—è–¥–∏, OLAP, –º–µ—Ä–µ–∂–µ–≤–∏–π –∞–Ω–∞–ª—ñ–∑).

**–°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:** `src/diamond/00_generate_dataset.py`

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤:** 1000

**–ü–µ—Ä—ñ–æ–¥ –¥–∞–Ω–∏—Ö:** 2023-01-01 (START_DATE) ‚Äì 2025-12-31 (END_DATE —Ç–∞ TODAY)

---

## 1. –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å 21 —Å—Ç–æ–≤–ø—Ü—è

1.  `report_id` (–£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID) ‚Äì –ú–∞—Å–∫–∞ ID: `DR-[NNNNN]`

**–ë–ª–æ–∫ 3: –ß–∞—Å–æ–≤–∏–π –≤–∏–º—ñ—Ä**

2.  `report_date` (–î–∞—Ç–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó)

**–ë–ª–æ–∫ 1: –§—ñ–∑–∏—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**

3. `carat_weight` (–í–∞–≥–∞, ct)
4. `color_grade` (–ö–æ–ª—ñ—Ä)
5. `clarity_grade` (–ß–∏—Å—Ç–æ—Ç–∞)
6. `polish_grade` (–ü–æ–ª—ñ—Ä—É–≤–∞–Ω–Ω—è)
7. `proportions_grade` (–ü—Ä–æ–ø–æ—Ä—Ü—ñ—ó)
8. `symmetry_grade` (–°–∏–º–µ—Ç—Ä—ñ—è)
9. `cut_grade` (–û–≥—Ä–∞–Ω—é–≤–∞–Ω–Ω—è) ‚Äì _–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–µ –ø–æ–ª–µ_
10. `fluorescence_grade` (–§–ª—É–æ—Ä–µ—Å—Ü–µ–Ω—Ü—ñ—è)
11. `stone_origin` (–ü–æ—Ö–æ–¥–∂–µ–Ω–Ω—è)

**–ë–ª–æ–∫ 4: –ú–µ—Ç–∞-–¥–∞–Ω—ñ –ø—Ä–æ—Ü–µ—Å—É –æ—Ü—ñ–Ω–∫–∏**

12. `expert_id` (ID –µ–∫—Å–ø–µ—Ä—Ç–∞)
13. `evaluation_time_min` (–ß–∞—Å –æ—Ü—ñ–Ω–∫–∏, —Ö–≤–∏–ª–∏–Ω–∏)
14. `report_notes_length` (–î–æ–≤–∂–∏–Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—è, –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤)
15. `report_sentiment` (–¢–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∫–æ–º–µ–Ω—Ç–∞—Ä—è)

**–ë–ª–æ–∫ 2: –¶—ñ–ª—å–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ / –†–∏–Ω–∫–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏**

16. `price` (–¶—ñ–Ω–∞, $)
17. `is_investment_grade` (–Ü–Ω–≤–µ—Å—Ç. –∫–ª–∞—Å: 1/0)
18. `is_report_rejected` (–ó–≤—ñ—Ç –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ: 1/0)
19. `is_sold` (–ü—Ä–æ–¥–∞–Ω–æ: 1/0)
20. `days_on_market` (–î–Ω—ñ–≤ –Ω–∞ —Ä–∏–Ω–∫—É)
21. `sale_date` (–î–∞—Ç–∞ –ø—Ä–æ–¥–∞–∂—É) ‚Äì _–¶–µ –ø–æ–ª–µ `NaT` (–ø–æ—Ä–æ–∂–Ω—î), —è–∫—â–æ `is_sold = 0`_

---

## 2. "–°–ª–æ–≤–Ω–∏–∫–∏" –¥–ª—è –∫–æ–¥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (IDC)

–£—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π–Ω—ñ –æ–∑–Ω–∞–∫–∏ –∑–∞–∫–æ–¥–æ–≤–∞–Ω—ñ —á–∏—Å–ª–æ–≤–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏. –ß–∏–º **–º–µ–Ω—à–µ** —á–∏—Å–ª–æ, —Ç–∏–º **–∫—Ä–∞—â–∞** —è–∫—ñ—Å—Ç—å (–∑–≥—ñ–¥–Ω–æ –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ IDC).

### –ë–ª–æ–∫ 1: –§—ñ–∑–∏—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (4C)

**1. `stone_origin` (–ü–æ—Ö–æ–¥–∂–µ–Ω–Ω—è)**

- `1`: Natural (–ü—Ä–∏—Ä–æ–¥–Ω–∏–π)
- `2`: Treated (–û–±–ª–∞–≥–æ—Ä–æ–¥–∂–µ–Ω–∏–π)
- `3`: Synthetic (Lab Grown)
- `0`: Simulant (–Ü–º—ñ—Ç–∞—Ü—ñ—è)

**2. `color_grade` (–ö–æ–ª—ñ—Ä)**

- `1`: D, `2`: E, `3`: F, `4`: G, `5`: H, `6`: I, `7`: J, `8`: K, `9`: L, `10`: M-Z

**3. `clarity_grade` (–ß–∏—Å—Ç–æ—Ç–∞)**

- `1`: IF (Internally Flawless / "Loupe-Clean")
- `2`: VVS1, `3`: VVS2
- `4`: VS1, `5`: VS2
- `6`: SI1, `7`: SI2
- `8`: P1 (Piqu√© 1), `9`: P2, `10`: P3

**4. `polish_grade` (–ü–æ–ª—ñ—Ä—É–≤–∞–Ω–Ω—è)**

- `1`: Excellent, `2`: Very Good, `3`: Good, `4`: Fair

**5. `proportions_grade` (–ü—Ä–æ–ø–æ—Ä—Ü—ñ—ó)**

- `1`: Excellent, `2`: Very Good, `3`: Good, `4`: Fair

**6. `symmetry_grade` (–°–∏–º–µ—Ç—Ä—ñ—è)**

- `1`: Excellent, `2`: Very Good, `3`: Good, `4`: Fair

**7. `cut_grade` (–ó–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ –æ–≥—Ä–∞–Ω—é–≤–∞–Ω–Ω—è)**

- `1`: Excellent, `2`: Very Good, `3`: Good, `4`: Fair

**8. `fluorescence_grade` (–§–ª—É–æ—Ä–µ—Å—Ü–µ–Ω—Ü—ñ—è)**

- `1`: Nil (None / –í—ñ–¥—Å—É—Ç–Ω—è)
- `2`: Slight (Faint / –ù–µ–∑–Ω–∞—á–Ω–∞)
- `3`: Medium (–°–µ—Ä–µ–¥–Ω—è)
- `4`: Strong (–°–∏–ª—å–Ω–∞)

### –ë–ª–æ–∫ 4: –ú–µ—Ç–∞-–¥–∞–Ω—ñ –ø—Ä–æ—Ü–µ—Å—É

**9. `expert_id` (–ï–∫—Å–ø–µ—Ä—Ç)**

- `1`, `2`, `3`, `4`, `5`

**10. `report_sentiment` (–¢–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∫–æ–º–µ–Ω—Ç–∞—Ä—è)**

- `1`: Positive
- `0`: Neutral
- `-1`: Negative

### –ë–ª–æ–∫ 2: –¶—ñ–ª—å–æ–≤—ñ –±—ñ–Ω–∞—Ä–Ω—ñ –∑–º—ñ–Ω–Ω—ñ

**11. `is_investment_grade`**

- `1`: –¢–∞–∫, `0`: –ù—ñ

**12. `is_report_rejected`**

- `1`: –¢–∞–∫, `0`: –ù—ñ

**13. `is_sold`**

- `1`: –¢–∞–∫, `0`: –ù—ñ

---

## 3. –õ–æ–≥—ñ–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö

–î–∞–Ω—ñ –Ω–µ —î –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏, –∞ –º—ñ—Å—Ç—è—Ç—å "–∑–∞—à–∏—Ç—ñ" –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ —Ç–∞ –∑–∞–∫–æ–Ω–æ–º—ñ—Ä–Ω–æ—Å—Ç—ñ –¥–ª—è —ó—Ö –ø–æ–¥–∞–ª—å—à–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É.

- **`carat_weight` (–í–∞–≥–∞).** –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –Ω–µ —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ, –∞ –∑–∞ –ª–æ–≥–Ω–æ—Ä–º–∞–ª—å–Ω–∏–º —Ä–æ–∑–ø–æ–¥—ñ–ª–æ–º (`np.random.lognormal`). –¶–µ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ —É —Å–≤—ñ—Ç—ñ –Ω–∞–±–∞–≥–∞—Ç–æ –±—ñ–ª—å—à–µ –¥—Ä—ñ–±–Ω–∏—Ö –∫–∞–º–µ–Ω—ñ–≤, –Ω—ñ–∂ –≤–µ–ª–∏–∫–∏—Ö.

- **`color_grade`, `clarity_grade` (–Ø–∫—ñ—Å—Ç—å).** –ì–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –Ω–µ —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ. –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ np.random.choice –∑ –≤–∞–≥–∞–º–∏ `p=[...]`. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∫–∞–º–µ–Ω—ñ –Ω–∞–π–≤–∏—â–æ—ó —è–∫–æ—Å—Ç—ñ (`D`, `IF`) –±—É–¥—É—Ç—å —Ä—ñ–¥–∫—ñ—Å–Ω–∏–º–∏ (–ø–æ 5%), –∞ –∫–∞–º–µ–Ω—ñ —Å–µ—Ä–µ–¥–Ω—å–æ—ó —è–∫–æ—Å—Ç—ñ (`G`, `VS2`) ‚Äì –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–º–∏ (–ø–æ 20%).

- **`stone_origin` (–ü–æ—Ö–æ–¥–∂–µ–Ω–Ω—è).** –¢–∞–∫–æ–∂ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∑ –≤–∞–≥–∞–º–∏. –ú–∏ –ø—Ä–∏–ø—É—Å—Ç–∏–ª–∏, —â–æ 70% —Ä–∏–Ω–∫—É ‚Äì —Ü–µ `Natural`.

- **–ú–µ—Ç–∞-–¥–∞–Ω—ñ (–ë–ª–æ–∫ 4).** `expert_id`, `evaluation_time_min` —Ç–æ—â–æ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –≤–∏–ø–∞–¥–∫–æ–≤–æ (—Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ).

- **–î–∞—Ç–∞ (–ë–ª–æ–∫ 3).** `report_date` –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –≤–∏–ø–∞–¥–∫–æ–≤–æ —É –Ω–∞—à–æ–º—É 3-—Ä—ñ—á–Ω–æ–º—É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ.

- **`cut_grade` (–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–µ –ø–æ–ª–µ):**
  –õ–æ–≥—ñ–∫–∞: `cut_grade = MAX(polish_grade, proportions_grade, symmetry_grade)`.
  –û—Å–∫—ñ–ª—å–∫–∏ `1 = Excellent`, –∞ `4 = Fair`, `MAX` –∑–∞–≤–∂–¥–∏ –¥–∞—î –Ω–∞–º **–Ω–∞–π–≥—ñ—Ä—à—É** –∑ —Ç—Ä—å–æ—Ö –æ—Ü—ñ–Ω–æ–∫, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º IDC (–∑–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –∫—Ä–∞—â–æ—é –∑–∞ —ó—ó –Ω–∞–π–≥—ñ—Ä—à–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç).

- **`price` (–¶—ñ–Ω–∞):**
  –¶—ñ–Ω–∞ **–Ω–∞–ø—Ä—è–º—É –∑–∞–ª–µ–∂–∏—Ç—å** –≤—ñ–¥ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫. –í–æ–Ω–∞ –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ –∑—Ä–æ—Å—Ç–∞—î –∑ `carat_weight` —ñ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ –º—É–ª—å—Ç–∏–ø–ª—ñ–∫–∞—Ç–æ—Ä–∏ —è–∫–æ—Å—Ç—ñ (`color_multi`, `clarity_multi`, `cut_multi`). –ö—Ä–∞—â—ñ –æ—Ü—ñ–Ω–∫–∏ –¥–∞—é—Ç—å –≤–∏—â–∏–π –º—É–ª—å—Ç–∏–ø–ª—ñ–∫–∞—Ç–æ—Ä.

- **`is_investment_grade` (–Ü–Ω–≤–µ—Å—Ç. –∫–ª–∞—Å):**
  –¶–µ **–±—ñ–Ω–∞—Ä–Ω–µ –ø—Ä–∞–≤–∏–ª–æ**. –ö–∞–º—ñ–Ω—å –≤–≤–∞–∂–∞—î—Ç—å—Å—è —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ–π–Ω–∏–º (`=1`), —è–∫—â–æ:
  `color_grade <= 4` (G –∞–±–æ –∫—Ä–∞—â–µ) AND
  `clarity_grade <= 5` (VS2 –∞–±–æ –∫—Ä–∞—â–µ) AND
  `cut_grade <= 2` (Very Good –∞–±–æ –∫—Ä–∞—â–µ) AND
  `carat_weight >= 1.0`

- **`is_report_rejected` (–ó–≤—ñ—Ç –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ):**
  –°–∏–º—É–ª—é—î –ª–æ–≥—ñ–∫—É –¥–ª—è –∞–≥–µ–Ω—Ç–∞: `Expert_5` —á–∞—Å—Ç—ñ—à–µ –ø–æ–º–∏–ª—è—î—Ç—å—Å—è (20% —à–∞–Ω—Å) –∞–±–æ —è–∫—â–æ –æ—Ü—ñ–Ω–∫–∞ –±—É–ª–∞ –Ω–∞–¥—Ç–æ —à–≤–∏–¥–∫–æ—é (`< 20 —Ö–≤`, 10% —à–∞–Ω—Å).

- **`is_sold` —Ç–∞ `days_on_market` (–¥–ª—è –†–µ–≥—Ä–µ—Å—ñ—ó –ö–æ–∫—Å–∞):**
  - `is_sold = 1` (70% –≤–∏–ø–∞–¥–∫—ñ–≤): `days_on_market` –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ `quality_score`. –ö—Ä–∞—â—ñ –∫–∞–º–µ–Ω—ñ (–Ω–∏–∂—á–∏–π `quality_score`) –ø—Ä–æ–¥–∞—é—Ç—å—Å—è —à–≤–∏–¥—à–µ (–º–µ–Ω—à–µ –¥–Ω—ñ–≤). `sale_date` = `report_date` + `days_on_market`.
  - `is_sold = 0` (30% –≤–∏–ø–∞–¥–∫—ñ–≤): –¶–µ **—Ü–µ–Ω–∑—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ**. `days_on_market` –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —è–∫ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `TODAY` (–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —è–∫ `2025-12-31`) —Ç–∞ `report_date`. `sale_date` –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è `NaT` (–ø–æ—Ä–æ–∂–Ω—ñ–º).
